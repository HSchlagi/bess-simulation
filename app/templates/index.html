{% extends "base.html" %}

{% block title %}BESS Simulation - Startseite{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <!-- Haupttitel und Beschreibung -->
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">BESS Simulation</h1>
        <p class="text-xl text-gray-600">
            Professionelle Simulation von Batterie-Energiespeichersystemen mit Lastprofilen, Wetterdaten, PV-Simulation, Wasserkraft-Integration, Intraday-Arbitrage und österreichischen Marktdaten.
        </p>
    </div>

    <!-- Status Overview Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8">
        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <div class="flex items-center">
                <div class="bg-green-100 p-3 rounded-lg">
                    <i class="fas fa-server text-green-600 text-2xl"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm font-medium text-gray-600">Server Status</p>
                    <p class="text-lg font-bold text-green-600">Online</p>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <div class="flex items-center">
                <div class="bg-blue-100 p-3 rounded-lg">
                    <i class="fas fa-database text-blue-600 text-2xl"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm font-medium text-gray-600">Datenbank</p>
                    <p class="text-lg font-bold text-blue-600">Verbunden</p>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <div class="flex items-center">
                <div class="bg-purple-100 p-3 rounded-lg">
                    <i class="fas fa-project-diagram text-purple-600 text-2xl"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm font-medium text-gray-600">Projekte</p>
                    <p class="text-lg font-bold text-purple-600" id="projectsCount">0 aktiv</p>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <div class="flex items-center">
                <div class="bg-orange-100 p-3 rounded-lg">
                    <i class="fas fa-users text-orange-600 text-2xl"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm font-medium text-gray-600">Kunden</p>
                    <p class="text-lg font-bold text-orange-600" id="customersCount">0 registriert</p>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <div class="flex items-center">
                <div class="bg-indigo-100 p-3 rounded-lg">
                    <i class="fas fa-chart-line text-indigo-600 text-2xl"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm font-medium text-gray-600">Intraday</p>
                    <p class="text-lg font-bold text-indigo-600">Aktiv</p>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <div class="flex items-center">
                <div class="bg-red-100 p-3 rounded-lg">
                    <i class="fas fa-flag text-red-600 text-2xl"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm font-medium text-gray-600">AT-Märkte</p>
                    <p class="text-lg font-bold text-red-600">Verfügbar</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Hauptinhalt - Drei Spalten -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
        <!-- Datenimport Section -->
        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <h2 class="text-xl font-semibold text-gray-900 mb-6">
                <i class="fas fa-arrow-up mr-2"></i>Datenimport
            </h2>
            
            <div class="space-y-4">
                <!-- Lastprofile -->
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-green-100 p-2 rounded-lg">
                            <i class="fas fa-chart-line text-green-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Lastprofile</h3>
                            <p class="text-sm text-gray-600">CSV, Excel - Verbrauchsdaten importieren</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.data_import_center') }}?tab=load" 
                       class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm">
                        Import
                    </a>
                </div>

                <!-- Wetterdaten -->
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-orange-100 p-2 rounded-lg">
                            <i class="fas fa-sun text-orange-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Wetterdaten</h3>
                            <p class="text-sm text-gray-600">DWD, API - Temperatur, Strahlung</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.data_import_center') }}?tab=weather" 
                       class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-md text-sm">
                        Import
                    </a>
                </div>

                <!-- PVSol-Export -->
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-orange-100 p-2 rounded-lg">
                            <i class="fas fa-home text-orange-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">PVSol-Export</h3>
                            <p class="text-sm text-gray-600">Systemkonfiguration & Ergebnisse</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.data_import_center') }}?tab=pvsol" 
                       class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-md text-sm">
                        Import
                    </a>
                </div>

                <!-- Wasserkraft -->
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-blue-100 p-2 rounded-lg">
                            <i class="fas fa-water text-blue-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Wasserkraft</h3>
                            <p class="text-sm text-gray-600">Durchflussdaten, Leistungspotential</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.data_import_center') }}?tab=hydro" 
                       class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm">
                        Import
                    </a>
                </div>

                <!-- Windkraft -->
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-teal-100 p-2 rounded-lg">
                            <i class="fas fa-wind text-teal-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Windkraft</h3>
                            <p class="text-sm text-gray-600">Windgeschwindigkeit, Leistungskurven</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.data_import_center') }}?tab=solar" 
                       class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-md text-sm">
                        Import
                    </a>
                </div>
            </div>
        </div>

        <!-- Neue Features Section -->
        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <h2 class="text-xl font-semibold text-gray-900 mb-6">
                <i class="fas fa-rocket mr-2"></i>Neue Features
            </h2>
            
            <div class="space-y-4">
                <!-- Intraday-Arbitrage -->
                <div class="flex items-center justify-between p-4 bg-indigo-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-indigo-100 p-2 rounded-lg">
                            <i class="fas fa-chart-line text-indigo-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Intraday-Arbitrage</h3>
                            <p class="text-sm text-gray-600">Tageshandel, Spread- & Schwellenwert-Modelle</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.data_import_center') }}?tab=intraday" 
                       class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm">
                        Konfigurieren
                    </a>
                </div>

                <!-- Österreichische Märkte -->
                <div class="flex items-center justify-between p-4 bg-red-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-red-100 p-2 rounded-lg">
                            <i class="fas fa-flag text-red-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">AT-Märkte</h3>
                            <p class="text-sm text-gray-600">APG Regelenergie, EPEX Intraday</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.data_import_center') }}?tab=austrian" 
                       class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm">
                        Konfigurieren
                    </a>
                </div>

                <!-- Erweiterte Wirtschaftlichkeit -->
                <div class="flex items-center justify-between p-4 bg-emerald-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-emerald-100 p-2 rounded-lg">
                            <i class="fas fa-calculator text-emerald-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Wirtschaftlichkeit</h3>
                            <p class="text-sm text-gray-600">Erweiterte Erlösberechnung</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.economic_analysis') }}" 
                       class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-md text-sm">
                        Analysieren
                    </a>
                </div>

                <!-- Konfiguration -->
                <div class="flex items-center justify-between p-4 bg-yellow-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="bg-yellow-100 p-2 rounded-lg">
                            <i class="fas fa-cog text-yellow-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Konfiguration</h3>
                            <p class="text-sm text-gray-600">YAML-Editor für alle Einstellungen</p>
                        </div>
                    </div>
                    <a href="{{ url_for('main.data_import_center') }}?tab=config" 
                       class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-md text-sm">
                        Bearbeiten
                    </a>
                </div>
            </div>
        </div>

        <!-- Projektverwaltung Section -->
        <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
            <h2 class="text-xl font-semibold text-gray-900 mb-6">
                <i class="fas fa-cog mr-2"></i>Projektverwaltung
            </h2>
            
            <div class="space-y-4">
                <!-- Alle Projekte anzeigen -->
                <a href="{{ url_for('main.projects') }}" 
                   class="flex items-center justify-between p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors">
                    <div class="flex items-center space-x-3">
                        <div class="bg-purple-100 p-2 rounded-lg">
                            <i class="fas fa-list text-purple-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Alle Projekte anzeigen</h3>
                            <p class="text-sm text-gray-600">Übersicht aller BESS-Simulationsprojekte</p>
                        </div>
                    </div>
                    <i class="fas fa-arrow-right text-purple-600"></i>
                </a>

                <!-- Neues Projekt erstellen -->
                <a href="{{ url_for('main.new_project') }}" 
                   class="flex items-center justify-between p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors">
                    <div class="flex items-center space-x-3">
                        <div class="bg-green-100 p-2 rounded-lg">
                            <i class="fas fa-plus text-green-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Neues Projekt erstellen</h3>
                            <p class="text-sm text-gray-600">BESS-System konfigurieren</p>
                        </div>
                    </div>
                    <i class="fas fa-arrow-right text-green-600"></i>
                </a>

                <!-- Kundenverwaltung -->
                <a href="{{ url_for('main.customers') }}" 
                   class="flex items-center justify-between p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors">
                    <div class="flex items-center space-x-3">
                        <div class="bg-blue-100 p-2 rounded-lg">
                            <i class="fas fa-users text-blue-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Kundenverwaltung</h3>
                            <p class="text-sm text-gray-600">Kunden und Kontakte verwalten</p>
                        </div>
                    </div>
                    <i class="fas fa-arrow-right text-blue-600"></i>
                </a>

                <!-- Dashboard -->
                <a href="{{ url_for('main.dashboard') }}" 
                   class="flex items-center justify-between p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors">
                    <div class="flex items-center space-x-3">
                        <div class="bg-orange-100 p-2 rounded-lg">
                            <i class="fas fa-tachometer-alt text-orange-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-900">Dashboard</h3>
                            <p class="text-sm text-gray-600">Übersicht und Statistiken</p>
                        </div>
                    </div>
                    <i class="fas fa-arrow-right text-orange-600"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Unterstützte Datenformate Section -->
    <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-6">
            <i class="fas fa-star text-yellow-500 mr-2"></i>Unterstützte Datenformate & APIs
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-6 gap-6">
            <div class="text-center">
                <div class="bg-green-100 p-4 rounded-lg inline-block mb-3">
                    <i class="fas fa-file-csv text-green-600 text-2xl"></i>
                </div>
                <h3 class="font-medium text-gray-900 mb-1">CSV-Dateien</h3>
                <p class="text-sm text-gray-600">Standard-Format für Zeitreihendaten</p>
            </div>
            
            <div class="text-center">
                <div class="bg-blue-100 p-4 rounded-lg inline-block mb-3">
                    <i class="fas fa-file-excel text-blue-600 text-2xl"></i>
                </div>
                <h3 class="font-medium text-gray-900 mb-1">Excel-Dateien</h3>
                <p class="text-sm text-gray-600">XLSX, XLS mit mehreren Arbeitsblättern</p>
            </div>
            
            <div class="text-center">
                <div class="bg-purple-100 p-4 rounded-lg inline-block mb-3">
                    <i class="fas fa-file-code text-purple-600 text-2xl"></i>
                </div>
                <h3 class="font-medium text-gray-900 mb-1">JSON-Export</h3>
                <p class="text-sm text-gray-600">PVSol-Systemkonfigurationen</p>
            </div>
            
            <div class="text-center">
                <div class="bg-orange-100 p-4 rounded-lg inline-block mb-3">
                    <i class="fas fa-cloud text-orange-600 text-2xl"></i>
                </div>
                <h3 class="font-medium text-gray-900 mb-1">Wetter-APIs</h3>
                <p class="text-sm text-gray-600">DWD-Daten, PVGIS</p>
            </div>

            <div class="text-center">
                <div class="bg-indigo-100 p-4 rounded-lg inline-block mb-3">
                    <i class="fas fa-chart-line text-indigo-600 text-2xl"></i>
                </div>
                <h3 class="font-medium text-gray-900 mb-1">EPEX SPOT</h3>
                <p class="text-sm text-gray-600">Intraday Auktionen (IDA1/2/3)</p>
            </div>

            <div class="text-center">
                <div class="bg-red-100 p-4 rounded-lg inline-block mb-3">
                    <i class="fas fa-flag text-red-600 text-2xl"></i>
                </div>
                <h3 class="font-medium text-gray-900 mb-1">APG Regelenergie</h3>
                <p class="text-sm text-gray-600">aFRR, FCR, mFRR Märkte</p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    loadCounts();
});

function loadCounts() {
    // Lade Projekt- und Kundenanzahl
    fetch('/api/projects')
        .then(response => response.json())
        .then(projects => {
            document.getElementById('projectsCount').textContent = `${projects.length} aktiv`;
        })
        .catch(error => console.error('Fehler beim Laden der Projekte:', error));
    
    fetch('/api/customers')
        .then(response => response.json())
        .then(customers => {
            document.getElementById('customersCount').textContent = `${customers.length} registriert`;
        })
        .catch(error => console.error('Fehler beim Laden der Kunden:', error));
}


</script>
{% endblock %} 